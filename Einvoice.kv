#: import ListAdapter kivy.adapters.listadapter.ListAdapter
#: import ListItemButton kivy.uix.listview.ListItemButton

#override the selected_color and deselected_color properties of the ListItemButton
<ListItemButton>:
    selected_color: 1,1,1,1
    deselected_color: 0,0,0,1
    font_name: 'DroidSansFallback.ttf'
    on_press: app.root.refresh_textinput(*args)


# The GUI coding
<MyScreenManager>:
    id:screen_manager
    MainScreen:
        id: screen_main
        name: 'main'
        data: screen_manager.data
        #manager: screen_manager
    TableScreen:
        id: screen_table
        name: 'table'
        #manager: screen_manager
        result_text: screen_main.result_text
        listdata: screen_main.listdata
        contentlist: screen_manager.contentlist
<MainScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: label_filepath
            font_size: 20
            size_hint_y: None
            height: 20
        FileChooserListView:
            id: listview
            filters:['*.csv']
            on_selection: label_filepath.text = self.selection and self.selection[0] or ''
        Button:
            id: button_loadcsv
            font_size:100
            #font_name: root.p
            size_hint_y: None
            text: 'Load CSV'
            on_release: root.loadcsv(label_filepath.text)
        Button:
            id:button_savexls
            font_size:100
            size_hint_y: None
            text: 'Save as XLS'
            on_release: root.savexls(listview.path+'\invoice.xls',root.data)
        Button:
            id:button_showresult
            font_size:100
            size_hint_y: None
            text: 'show result'
            on_release:
                root.change_result_text()
                root.manager.transition.direction = 'left'
                root.manager.current = 'table'

<TableScreen>:
    BoxLayout:
        orientation: 'vertical'
        ListView:
            size_hint_y: .8
            adapter:
                ListAdapter(data = root.listdata,
                selection_mode='single',
                allow_empty_selection=False,
                cls = ListItemButton)

        TextInput:
            id:textinput_result
            font_size:20
            font_name: root.p
            size_hint_y: None
            text: root.contentlist
        Button:
            id:button_gomain
            font_size:100
            size_hint_y: None
            text: 'main'
            on_release:
                root.manager.transition.direction = 'right'
                root.manager.current = 'main'